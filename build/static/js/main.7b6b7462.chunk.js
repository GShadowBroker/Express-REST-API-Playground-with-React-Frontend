(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{31:function(e,t,n){e.exports=n(59)},53:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(28),c=n.n(l),u=n(10),o=n(1),i=n(30),m=n(13),s=n(3),p=n(7),h=n.n(p),d="/api/persons",f=function(){return h.a.get(d).then((function(e){return e.data}))},E=function(e){return h.a.post(d,e).then((function(e){return e.data}))},b=function(e){return h.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},g=function(e,t){return h.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.message;if(!t)return null;return r.a.createElement("div",{className:"error",style:{position:"absolute",bottom:0,left:"50%",transform:"translate(-50%)",boxShadow:"2px 2px 4px #7f8c8d",border:"1px solid #e74c3c",borderRadius:5,color:"#e74c3c",padding:20,margin:15}},t)},w=function(e){var t=e.persons,n=e.newSearchTerm,a=e.handleSearchChange,l=t.filter((function(e){return new RegExp(n,"i").test(e.name)})).map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number)}));return r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"search"},"Filter shown with ",r.a.createElement("input",{id:"search_input",onChange:a}),r.a.createElement("ul",null,n?l:null)))},j=function(e){var t=e.handleSubmit,n=e.handleNameInputChange,a=e.handleNumberInputChange;return r.a.createElement("div",{className:"person-form"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{id:"name_input",onChange:n})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{id:"number_input",onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},O=function(e){var t=e.persons,n=e.updatePersons,a=e.displayDialog;return r.a.createElement("div",{className:"persons"},r.a.createElement("table",null,r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(y,{key:e.id,person:e,updatePersons:n,persons:t,displayDialog:a})})))))},y=function(e){var t=e.person,n=e.persons,a=e.updatePersons,l=e.displayDialog;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&b(t.id).then((function(e){console.log(e),a(n.filter((function(e){return e.id!==t.id})))})).catch((function(){return l("There was an error trying to delete record. Please refresh browser and try again.")}))}},"delete")))},S=function(){Object(a.useEffect)((function(){f().then((function(e){l(e),D(!1)})).catch((function(e){A("There was an error retrieving phonebook data."),D(!1)}))}),[]);var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),o=u[0],p=u[1],h=Object(a.useState)(""),d=Object(s.a)(h,2),b=d[0],y=d[1],S=Object(a.useState)(""),C=Object(s.a)(S,2),N=C[0],k=C[1],x=Object(a.useState)(!0),P=Object(s.a)(x,2),T=P[0],D=P[1],_=Object(a.useState)(null),q=Object(s.a)(_,2),L=q[0],I=q[1],A=function(e){I(e),setTimeout((function(){I(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(w,{persons:n,newSearchTerm:N,handleSearchChange:function(e){k(e.target.value)}}),r.a.createElement("h2",null,"Add New"),r.a.createElement(j,{handleSubmit:function(e){e.preventDefault();var t={id:n.length+1,name:o,number:b};if(n.some((function(e){return e.name.toLowerCase()===o.toLowerCase()}))){if(!window.confirm("".concat(o," is already added to the Phonebook. Update phone number with the newer one?")))return;var a=n.find((function(e){return e.name===o}));return g(a.id,Object(m.a)(Object(m.a)({},a),{},{number:b})).then((function(e){console.log(e),l(n.map((function(e){return e.name===o?Object(m.a)(Object(m.a)({},e),{},{number:b}):e}))),D(!1)})).catch((function(){A("There was an error updating the record."),D(!1)})),document.querySelector("#name_input").value="",void(document.querySelector("#number_input").value="")}E(t).then((function(){l([].concat(Object(i.a)(n),[t])),D(!1)})).catch((function(e){A("There was an error creating a new record."),D(!1)})),document.querySelector("#name_input").value="",document.querySelector("#number_input").value=""},handleNameInputChange:function(e){p(e.target.value)},handleNumberInputChange:function(e){y(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{message:L}),T?r.a.createElement("h3",null,"Loading..."):null,n?r.a.createElement(O,{persons:n,updatePersons:function(e){return l(e)},displayDialog:A}):r.a.createElement("p",null,"Cannot reach phonebook."))},C=function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,"Home"),r.a.createElement("p",null,"Here's the root of all apps!"))},N=function(){return h.a.get("/api/notes").then((function(e){return e.data}))},k=function(e){return h.a.post("/api/notes",e).then((function(e){return e.data}))},x=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),o=u[0],i=u[1],m=Object(a.useState)(!1),p=Object(s.a)(m,2),h=p[0],d=p[1],f=Object(a.useState)(!0),E=Object(s.a)(f,2),b=E[0],g=E[1],v=Object(a.useState)(),w=Object(s.a)(v,2),j=w[0],O=w[1];Object(a.useEffect)((function(){N().then((function(e){console.log(e),l(e),g(!1)})).catch((function(e){console.log(e),O(e),g(!1)}))}),[]);var y=n.map((function(e){return r.a.createElement("li",{key:e.id},e.date," - ",e.content)}));return r.a.createElement("div",{className:"something"},r.a.createElement("h1",null,"Add note"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={content:o,date:new Date,important:h,id:n.length+1};k(t).then((function(e){console.log(e),l(n.concat(e)),i(""),d(!1)}))}},r.a.createElement("div",null,"Content ",r.a.createElement("input",{type:"text",onChange:function(e){return i(e.target.value)},value:o})),r.a.createElement("div",null,"Important ",r.a.createElement("select",{onChange:function(e){return d(e.target.value)}},r.a.createElement("option",{value:"false"},"No"),r.a.createElement("option",{value:"true"},"Yes"))),r.a.createElement("input",{type:"submit",value:"Save"})),r.a.createElement("h1",null,"Notes"),b?r.a.createElement("h3",null,"Loading..."):null,r.a.createElement("ul",null,n&&!j?y:r.a.createElement("li",null,"No notes have been found.")))},P=(n(53),function(e){var t=e.countries,n=e.newCountry,a=t.filter((function(e){return new RegExp("^".concat(n),"i").test(e.name)})),l=function(e){e.target.nextSibling.classList.toggle("active")},c=a.map((function(e){return r.a.createElement("li",{key:e.numericCode},e.name," ",r.a.createElement("button",{className:"show-btn",onClick:l},"Show"),r.a.createElement(T,{country:e}))}));if(0===c.length)return r.a.createElement("span",null,"No matches, specify another filter.");if(c.length>10)return r.a.createElement("span",null,"Too many matches, specify another filter.");if(c.length>1)return c;var u=a[0];return r.a.createElement(T,{country:u,active:!0})}),T=function(e){var t=e.country,n=e.active,a=t.languages.map((function(e){return r.a.createElement("li",{key:e.nativeName},e.name)}));return r.a.createElement("div",{className:n?"country-info active":"country-info"},r.a.createElement("h2",null,t.name),r.a.createElement("p",null,"Capital: ",t.capital),r.a.createElement("p",null,"Population: ",t.population," habitants"),r.a.createElement("h3",null,"Languages"),r.a.createElement("ul",null,a),r.a.createElement("br",null),r.a.createElement("img",{src:t.flag,alt:t.name,width:"200"}),r.a.createElement(D,{city:t.capital}))},D=function(e){var t=e.city,n=Object(a.useState)(null),l=Object(s.a)(n,2),c=l[0],u=l[1],o=Object(a.useState)(null),i=Object(s.a)(o,2),m=i[0],p=i[1];return Object(a.useEffect)((function(){h.a.get("http://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("5aebc8597768c633c985e283e4fbb762")).then((function(e){console.log(e.data),u(e.data)})).catch((function(e){return p(e)}))}),[t]),c&&!m?r.a.createElement("div",{className:"weather"},r.a.createElement("h3",null,"Weather in ",t),r.a.createElement("p",null,r.a.createElement("strong",null,"Temperature:")," ",c.main.temp,"\xba ",c.weather[0].description),r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(c.weather[0].icon,"@2x.png"),alt:c.weather[0].description}),r.a.createElement("p",null,r.a.createElement("strong",null,"Wind:")," ",c.wind.speed," mph ",c.wind.deg," deg")):r.a.createElement("p",null,"Cannot retrieve weather data.")},_=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(null),u=Object(s.a)(c,2),o=u[0],i=u[1],m=Object(a.useState)(""),p=Object(s.a)(m,2),d=p[0],f=p[1];Object(a.useEffect)((function(){h.a.get("https://restcountries.eu/rest/v2/all").then((function(e){return l(e.data)})).catch((function(e){return i(e)}))}),[]);return r.a.createElement("div",{className:"countries"},r.a.createElement("h1",null,"Countries"),r.a.createElement("div",null,"Find countries ",r.a.createElement("input",{onChange:function(e){f(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("ul",null,d&&!o?r.a.createElement(P,{countries:n,newCountry:d}):null)))},q=function(){return r.a.createElement(u.a,null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/phonebook"},"Phonebook")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/notes"},"Notes")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/countries"},"Countries")))),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/phonebook"},r.a.createElement(S,null)),r.a.createElement(o.a,{path:"/notes"},r.a.createElement(x,null)),r.a.createElement(o.a,{path:"/countries"},r.a.createElement(_,null)),r.a.createElement(o.a,{path:"/"},r.a.createElement(C,null))))};c.a.render(r.a.createElement(q,null),document.querySelector("#root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.7b6b7462.chunk.js.map